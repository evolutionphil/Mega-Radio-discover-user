# Mega Radio - TV App (Samsung Tizen + LG webOS)

This is the unified TV project for Mega Radio, supporting **both Samsung Tizen and LG webOS** platforms from a single folder (LGTV pattern).

## Project Structure

```
tv-app/
├── config.xml              # Samsung Tizen configuration with required privileges
├── .project               # Tizen Studio project file (Project: MegaRadioTVAPP)
├── .tproject              # Platform: tv-samsung-9.0
├── .settings/             # Eclipse/Tizen Studio settings
├── appinfo.json           # LG webOS configuration
├── index.html             # Main HTML file (auto-generated by build)
├── icon.png               # App icon
├── assets/                # React app build output
│   ├── index-[hash].js   # Main JavaScript bundle
│   └── index-[hash].css  # Main CSS bundle
├── css/                   # TV-specific styles
├── js/                    # TV platform scripts
│   ├── platform-detect.js
│   ├── tv-remote-keys.js
│   └── tv-audio-player.js
├── images/                # App images and icons
├── pages/                 # Additional pages
├── tools/                 # Development tools
├── webOSTVjs-1.2.0/       # LG webOS SDK
└── main.js                # Entry point

```

## App Configuration

**App ID:** `lJoKY533ah.MegaRadioTVAPP`
**Package:** `lJoKY533ah`
**Platform:** Samsung Tizen TV 9.0
**Resolution:** 1920x1080 (Full HD)

## Building the App

From the project root directory, run:

```bash
./build-samsung-tv.sh
```

This script will:
1. Build the React app with Vite (`npm run build`)
2. Copy all assets to `tv-app/assets/`
3. Generate `index.html` with the React app integrated
4. Keep all Samsung configuration files unchanged

**Note:** All paths in the generated HTML are relative for TV compatibility.

## Platform Support

This single folder supports **BOTH** platforms:
- **Samsung Tizen TV**: Uses `config.xml`, `.project`, `.tproject`
- **LG webOS TV**: Uses `appinfo.json`, `webOSTVjs-1.2.0/`

The same React bundle and assets work for both!

## Deploying to Samsung TV

### Method 1: Tizen Studio

1. Open **Tizen Studio**
2. **File** > **Open Projects from File System**
3. Select the `tv-app` folder
4. The project will be recognized as "MegaRadioTVAPP" with platform `tv-samsung-9.0`
5. Right-click the project
6. **Run As** > **Tizen Web Application**

### Method 2: Samsung TV Emulator

1. Open Tizen Studio
2. Tools > Emulator Manager
3. Create a TV emulator (Samsung TV 9.0 or compatible)
4. Launch the emulator
5. Right-click project > Run As > Tizen Web Application
6. Select the running emulator as target

### Method 3: Real Samsung TV (via WiFi)

1. Enable Developer Mode on your Samsung TV:
   - Press: **Home** (5 times), then **1**, **2**, **3**, **4**, **5** on remote
   - Turn ON "Developer mode"
   - Enter your PC's IP address
   - Restart TV
2. In Tizen Studio:
   - **Tools** > **Device Manager**
   - Your TV should appear in the list
   - Right-click project > **Run As** > **Tizen Web Application**
   - Select your TV as target

## Important Notes

### Configuration Files (DO NOT MODIFY)
- `config.xml` - Contains app ID, package name, and permissions
- `.project` - Tizen Studio project configuration
- `.tproject` - Platform version (tv-samsung-9.0)
- `.settings/` - Eclipse/Tizen Studio settings

These files are pre-configured for Samsung Tizen TV deployment. Modifying them may break the project.

### After Code Changes

Always rebuild the app after making changes to the React code:

```bash
./build-samsung-tv.sh
```

This ensures the latest React build is packaged for the TV app.

## TV Features

### Platform Detection
- Automatically detects Samsung Tizen TV platform
- Falls back to web browser for development

### Remote Control Support
- All directional keys (UP, DOWN, LEFT, RIGHT)
- ENTER/SELECT for confirmation
- RETURN/BACK for navigation
- Channel UP/DOWN mapped to navigation

### Audio Playback
- Uses Samsung Tizen AVPlay API for audio streaming
- Supports HLS and direct stream URLs
- Auto-play when station changes
- Volume control and playback state management

## Troubleshooting

### App doesn't load on TV
1. Rebuild with `./build-samsung-tv.sh`
2. Verify `tv-app/assets/` contains the built files
3. Check TV browser console via Remote Web Inspector

### Remote control doesn't work
1. Ensure `js/tv-remote-keys.js` is loaded
2. Check platform detection in browser console
3. Verify all interactive elements have `data-tv-focusable="true"`

### Audio playback issues
1. Check stream URL format (Samsung TVs prefer HLS)
2. Verify `js/tv-audio-player.js` is loaded
3. Use Remote Web Inspector to check for errors

## Deploying to LG webOS TV

### Prerequisites

1. **Install LG webOS TV SDK CLI tools:**
   ```bash
   npm install -g @webosose/ares-cli
   ```

2. **Enable Developer Mode on your LG TV:**
   - Download "Developer Mode" app from LG Content Store
   - Launch it and turn ON Developer Mode
   - Note your TV's IP address

### Method 1: Package and Install

1. **Package the app:**
   ```bash
   cd tv-app
   ares-package .
   ```
   This creates: `com.megaradio.tv_1.0.0_all.ipk`

2. **Add your TV to ares-cli:**
   ```bash
   ares-setup-device
   ```
   Follow prompts to add your TV (name, IP address, port 9922, passphrase)

3. **Install on TV:**
   ```bash
   ares-install --device YOUR_TV_NAME com.megaradio.tv_1.0.0_all.ipk
   ```

4. **Launch the app:**
   ```bash
   ares-launch --device YOUR_TV_NAME com.megaradio.tv
   ```

### Method 2: Direct Launch (Development)

For quick testing without packaging:
```bash
ares-install --device YOUR_TV_NAME .
ares-launch --device YOUR_TV_NAME com.megaradio.tv
```

## Remote Debugging

### Samsung TV

To debug on real Samsung TV:

1. Enable Developer Mode on TV
2. In Chrome/Chromium: Navigate to `chrome://inspect`
3. Click "Configure" and add: `TV_IP_ADDRESS:9222`
4. Your TV will appear under "Remote Target"
5. Click "inspect" to open DevTools

### LG webOS TV

To debug on real LG TV:
```bash
ares-inspect --device YOUR_TV_NAME com.megaradio.tv
```
This opens Chrome DevTools connected to your LG TV app.

## Current Status

✅ React app integrated with Samsung Tizen project
✅ All configuration files preserved
✅ TV platform scripts included
✅ Remote control navigation ready
✅ Audio playback system configured
✅ Ready for deployment to Samsung Tizen TV
✅ Ready for deployment to LG webOS TV
✅ Single unified codebase for both platforms
